---
# Generate ssh key pair for the heketi user
- hosts: localhost
  connection: local
  vars:
    keypair_name: heketi
  roles:
    - generate-keypair

# Setup heketi on the nodes
- hosts: all
  become: True
  vars:
    # Choose a heketi deployment or standard with bricks
    heketi: true
    # Heketi REST for glusterfs
    heketi_version: 1.0.1
    heketi_distribution: "heketi-{{ heketi_version }}.linux.amd64"
    heketi_mirror_url: "https://github.com/heketi/heketi/releases/download/"
    heketi_install_dir: "/usr/local"
    heketi_port: 8080
    # Standard file system bricks (no heketi)
    std_birck_nb: 1
  roles:
    - deploy-addons
